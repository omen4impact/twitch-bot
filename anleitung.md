Ziel des Projektes ist ein stabiler Twitch‑Bot für deinen eigenen Kanal, der Chat‑Nachrichten in Echtzeit verarbeitet und zusätzlich Events wie Follows, Subscriptions, Channel Points und ähnliche Aktionen erfasst. Die Lösung soll auf einem virtuellen privaten Server laufen und n8n als zentrale Automatisierungsplattform nutzen. Die Chat‑Verbindung muss dauerhaft bestehen, deshalb wird ein kleiner Python‑Dienst als Basishandler eingesetzt, während n8n die eigentliche Logik, Integrationen und Datenhaltung übernimmt.

Der Basishandler hat die Aufgabe, eine permanente Verbindung zum Twitch‑Chat über das offizielle Chat‑Protokoll zu halten, eingehende Nachrichten zu parsen und relevante Daten in strukturierter Form an n8n zu senden. Der Basishandler muss außerdem eine Schnittstelle besitzen, über die n8n Rückantworten sendet, die dann in den Chat geschrieben werden. Der Basishandler ist so zu gestalten, dass er sich bei Verbindungsabbrüchen automatisch neu verbindet und Rate‑Limits respektiert.

n8n übernimmt die fachliche Verarbeitung. n8n empfängt Nachrichten und Events über Webhooks und entscheidet anhand von Regeln, welche Aktionen ausgeführt werden. Dazu gehören das Auswerten von Befehlen, das Zugreifen auf Datenbanken, das Auslösen von externen Programmierschnittstellen und das Formatieren der Antworten. n8n speichert zustandsbehaftete Daten wie Zählerstände, Cooldowns und Nutzerprofile in einer Datenbank wie PostgreSQL oder in einem schnellen Schlüssel‑Wert‑Speicher wie Redis. n8n sendet die endgültigen Chat‑Antworten über eine definierte Rückruf‑Schnittstelle an den Basishandler.

Für die Event‑Verarbeitung wird Twitch EventSub genutzt. Der virtuelle private Server stellt dafür einen öffentlich erreichbaren Endpunkt bereit. n8n validiert eingehende EventSub‑Signaturen, verarbeitet die Events nach festen Regeln und speichert relevante Informationen in der Datenbank. n8n sendet gegebenenfalls Chat‑Nachrichten an den Basishandler, um automatische Mitteilungen im Chat auszugeben.

Der Workflow für Chat‑Befehle ist wie folgt zu gestalten. Der Basishandler übermittelt jede Chat‑Nachricht zusammen mit Kanal, Nutzername, Rolleninformationen und Zeitstempel an n8n. n8n prüft, ob es sich um einen Befehl handelt, ob ein Cooldown aktiv ist und ob der Benutzer berechtigt ist. n8n führt die entsprechende Aktion aus und sendet eine Antwort an den Basishandler, der die Nachricht in den Chat schreibt. Fehler werden in n8n zentral geloggt und optional in einem eigenen Kanal gemeldet.

Die Sicherheit basiert auf einer klaren Trennung der Rollen. Der Basishandler hält die geheimen Twitch‑Zugangsdaten nur lokal und stellt niemals den Zugriff auf diese Daten über n8n bereit. n8n kommuniziert mit dem Basishandler ausschließlich über eine gesicherte Schnittstelle mit einem gemeinsamen Geheimnis und nutzt Transportverschlüsselung. Für EventSub wird eine verifizierte Signaturprüfung eingesetzt.

Die Installation erfolgt auf dem virtuellen privaten Server mit einem Prozessmanager, der den Basishandler automatisch neu startet, wenn ein Fehler auftritt. n8n wird entweder auf demselben Server oder auf einem getrennten System betrieben, ist jedoch in beiden Fällen über eine sichere Netzwerkverbindung erreichbar. Zusätzlich wird eine Datenbank für zustandsbehaftete Informationen bereitgestellt. Die Überwachung umfasst Log‑Dateien, Fehler‑Trigger in n8n und Health‑Checks, die den Zustand des Basishandlers regelmäßig prüfen.

Die Wartung umfasst das regelmäßige Aktualisieren der Abhängigkeiten, das Rotieren von Zugangsdaten, das Prüfen der EventSub‑Abonnements und das Testen der Chat‑Verbindung unter realen Bedingungen. Änderungen an Commands und Regeln erfolgen in n8n, wodurch keine Änderungen am Basishandler nötig sind, solange das Nachrichtenformat stabil bleibt.
